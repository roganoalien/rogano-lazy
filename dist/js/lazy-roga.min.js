"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),Lazy=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".rogano-lazy",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:".lazy-broken";_classCallCheck(this,n),this._timeout,this.broken=document.querySelectorAll("img"+i),this.data="data-broken",this.delay=t,this.lazyload=e,this.listener=this.lazyInit.bind(this),this.document=document,this.window=window,this.lazyClass=this.lazyload.split(".").join(""),this.img=document.querySelectorAll("img"+this.lazyload),this.initEvents(),this.initBroken(),this.lazyInit()}return _createClass(n,[{key:"initBroken",value:function(){var e=this,i=void 0;this.broken.forEach(function(t){i=t.getAttribute(e.data),t.classList.add(e.whichSvg(i))})}},{key:"initEvents",value:function(){this.document.addEventListener("scroll",this.listener),this.window.addEventListener("resize",this.listener),this.window.addEventListener("orientationchange",this.listener)}},{key:"whichSvg",value:function(t){switch(t){case"broken":return"broken-img";case"unlink":return"unlink-img"}}},{key:"lazyInit",value:function(){var i=this,t=document.querySelectorAll(this.lazyload);if(this._timeout&&clearTimeout(this._timeout),0===t.length)return this.document.removeEventListener("scroll",this.listener),this.window.removeEventListener("resize",this.listener),this.window.removeEventListener("orientationchange",this.listener),!1;this._timeout=setTimeout(function(){t.forEach(function(t){if(i.isInsideViewport(t)){var e=new Image;t.classList.remove(i.lazyClass),e.onload=function(){t.src=e.src},e.src=t.dataset.src}})},this.delay)}},{key:"isInsideViewport",value:function(t){var e=window.scrollY||window.pageYOffset,i=t.getBoundingClientRect().top+e,n=e+window.innerHeight,s=e,o=i+t.clientHeight;return s<=o&&o<=n||i<=n&&s<=i}}]),n}();