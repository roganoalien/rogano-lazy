"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),Lazy=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".rogano-lazy",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:".lazy-broken";_classCallCheck(this,n),this._timeout,this.broken=document.querySelectorAll("img"+i),this.data="data-broken",this.delay=e,this.lazyload=t,this.listener=this.lazyInit.bind(this),this.document=document,this.window=window,this.lazyClass=this.lazyload.split(".").join(""),this.img=document.querySelectorAll("img"+this.lazyload),this.initEvents(),this.initBroken(),this.lazyInit()}return _createClass(n,[{key:"initBroken",value:function(){var t=this,i=void 0;this.broken.forEach(function(e){i=e.getAttribute(t.data),e.classList.add(t.whichSvg(i))})}},{key:"initEvents",value:function(){this.document.addEventListener("scroll",this.listener),this.window.addEventListener("resize",this.listener),this.window.addEventListener("orientationchange",this.listener)}},{key:"whichSvg",value:function(e){switch(e){case"broken":return"broken-img";case"unlink":return"unlink-img"}}},{key:"lazyInit",value:function(){var i=this,e=document.querySelectorAll(this.lazyload);if(this._timeout&&clearTimeout(this._timeout),console.log(e.length),0===e.length)return console.log("Remueve"),this.document.removeEventListener("scroll",this.listener),this.window.removeEventListener("resize",this.listener),this.window.removeEventListener("orientationchange",this.listener),!1;this._timeout=setTimeout(function(){e.forEach(function(e){if(i.isInsideViewport(e)){var t=new Image;e.classList.remove(i.lazyClass),t.onload=function(){e.src=t.src},t.src=e.dataset.src}})},this.delay)}},{key:"isInsideViewport",value:function(e){var t=window.scrollY||window.pageYOffset,i=e.getBoundingClientRect().top+t,n=t+window.innerHeight,s=t,o=i+e.clientHeight;return s<=o&&o<=n||i<=n&&s<=i}}]),n}();