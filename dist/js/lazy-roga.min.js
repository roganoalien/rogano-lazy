"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),Lazy=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".rogano-lazy",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:".lazy-broken";_classCallCheck(this,i),this._timeout,this.broken=document.querySelectorAll("img"+n),this.data="data-broken",this.delay=e,this.lazyload=t,this.lazyClass=this.lazyload.split(".").join(""),this.img=document.querySelectorAll("img"+this.lazyload),this.initEvents(),this.initBroken()}return _createClass(i,[{key:"initBroken",value:function(){var t=this,n=void 0;this.broken.forEach(function(e){n=e.getAttribute(t.data),e.classList.add(t.whichSvg(n))})}},{key:"initEvents",value:function(){var e=this;document.addEventListener("scroll",function(){return e.lazyInit()}),window.addEventListener("resize",function(){return e.lazyInit()}),window.addEventListener("orientationchange",function(){return e.lazyInit()})}},{key:"whichSvg",value:function(e){switch(e){case"broken":return"broken-img";case"unlink":return"unlink-img"}}},{key:"lazyInit",value:function(){var n=this;if(this._timeout&&clearTimeout(this._timeout),0===this.img.length)return console.log("Remueve"),document.removeEventListener("scroll",this.lazyInit()),window.removeEventListener("resize",function(){return n.lazyInit()}),window.removeEventListener("orientationchange",function(){return n.lazyInit()}),!1;this._timeout=setTimeout(function(){n.img.forEach(function(e){if(console.log(n.isInsideViewport(e)),n.isInsideViewport(e)){var t=new Image;console.log(n.lazyload),e.classList.remove(n.lazyClass),t.onload=function(){e.src=t.src},t.src=e.dataset.src}})},this.delay)}},{key:"isInsideViewport",value:function(e){console.log(e);var t=window.scrollY||window.pageYOffset,n=e.getBoundingClientRect().top+t,i=t+window.innerHeight,o=t,r=n+e.clientHeight;return o<=r&&r<=i||n<=i&&o<=n}}]),i}();